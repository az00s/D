@model IEnumerable<D.Models.Сотрудник>

@{
    ViewBag.Title = "Сотрудники";
}

@Html.Partial("_SideMenuEmployee")
<div id="table">
    @Html.Partial("Table")
</div>
    <div class="dontPrint" id="chart">
    </div>

   

        <script type="text/javascript" src="~/Scripts/jsapi.js"></script>
             

        <script type="text/javascript">
                 // Подгружаем API
            google.load('visualization', '1.0', { 'packages': ['corechart'] });

            // Устанавливаем callback
            google.setOnLoadCallback(drawChart);

            function drawChart() {

                var options = {
                    'title': 'График результативности продавцов',
                    'width': 500,
                    'height': 400,
                    is3D: true,
                    //pieSliceText: 'label',
                    backgroundColor: "#DADDE2",
                    chartArea: { left: 70, top: 40, width: '100%', height: '100%' },
                    pieSliceText: "percentage",
                    tooltip: { showColorCode: true, text: "value" },
                };

                var data = new google.visualization.DataTable();
                data.addColumn('string', 'Employees');
                data.addColumn('number', 'Orders');

                $.getJSON('@Url.Action("GetDataForChart", "Сотрудник")', null,
                                                                        function (result) {
                                                                            if (result.Employees.length) {
                                                                                $.each(result.Employees, function (index, c) {
                                                                                    data.addRow([c.Name, c.Value]);
                                                                                });
                                                                                // Отрисовка диаграммы
                                                                                var chart = new google.visualization.PieChart(
                                                                                document.getElementById('chart'));
                                                                                chart.draw(data, options);
                                                                            };
                                                                        });
            };
            </script>

    <div class="scrollup">
        <i class="glyphicon glyphicon-chevron-up"></i>
    </div>

    






